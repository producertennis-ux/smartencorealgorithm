<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Performance Score Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Custom styles for number input arrows */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
          -webkit-appearance: none; 
          margin: 0; 
        }
        input[type=number] {
          -moz-appearance: textfield;
        }
    </style>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen p-4">

    <div class="bg-white p-6 sm:p-8 rounded-2xl shadow-lg w-full max-w-3xl">
        
        <!-- Header -->
        <div class="text-center mb-6">
            <h1 class="text-2xl sm:text-3xl font-bold text-slate-800">Performance Score Calculator</h1>
            <p class="text-sm text-slate-500 mt-2">Ps = (Nu × Wu) + (Nsc × Wsc) + (Nsd × Wsd) + (Nm × Wm)</p>
        </div>

        <div id="calculator-body">
            <!-- Input Sections -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-6">
                <!-- Column 1: Raw Metrics -->
                <div class="space-y-4">
                    <h2 class="text-lg font-semibold text-slate-700 border-b pb-2">Step 1: Enter Metrics</h2>
                    <div>
                        <label for="uniques" class="block text-sm font-medium text-slate-600">Uniques (U)</label>
                        <input type="number" id="uniques" placeholder="e.g., 500" class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-sm shadow-sm placeholder-slate-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500">
                    </div>
                    <div>
                        <label for="sessionCount" class="block text-sm font-medium text-slate-600">Session Count (SC)</label>
                        <input type="number" id="sessionCount" placeholder="e.g., 1200" class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-sm shadow-sm placeholder-slate-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500">
                    </div>
                    <div>
                        <label for="sessionDuration" class="block text-sm font-medium text-slate-600">Session Duration (SD)</label>
                        <input type="number" id="sessionDuration" placeholder="e.g., 360" class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-sm shadow-sm placeholder-slate-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500">
                    </div>
                    <div>
                        <label for="minutesWatched" class="block text-sm font-medium text-slate-600">Minutes Watched (M)</label>
                        <input type="number" id="minutesWatched" placeholder="e.g., 8000" class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-sm shadow-sm placeholder-slate-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500">
                    </div>
                </div>

                <!-- Column 2: Max Values -->
                <div class="space-y-4">
                    <h2 class="text-lg font-semibold text-slate-700 border-b pb-2">Step 2: Enter Max Values</h2>
                    <div>
                        <label for="maxUniques" class="block text-sm font-medium text-slate-600">Max Uniques</label>
                        <input type="number" id="maxUniques" placeholder="e.g., 1000" class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-sm shadow-sm placeholder-slate-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500">
                    </div>
                    <div>
                        <label for="maxSessionCount" class="block text-sm font-medium text-slate-600">Max Session Count</label>
                        <input type="number" id="maxSessionCount" placeholder="e.g., 2000" class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-sm shadow-sm placeholder-slate-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500">
                    </div>
                    <div>
                        <label for="maxSessionDuration" class="block text-sm font-medium text-slate-600">Max Session Duration</label>
                        <input type="number" id="maxSessionDuration" placeholder="e.g., 500" class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-sm shadow-sm placeholder-slate-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500">
                    </div>
                    <div>
                        <label for="maxMinutesWatched" class="block text-sm font-medium text-slate-600">Max Minutes Watched</label>
                        <input type="number" id="maxMinutesWatched" placeholder="e.g., 10000" class="mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-sm shadow-sm placeholder-slate-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500">
                    </div>
                </div>
            </div>

            <!-- Step 3: Weights -->
            <div class="mt-6">
                <div class="flex justify-between items-center border-b pb-2 mb-4">
                    <h2 class="text-lg font-semibold text-slate-700">Step 3: Assign Weights</h2>
                    <div id="weight-tracker" class="text-sm font-medium text-slate-600">
                        Total Weight: <span id="totalWeight" class="font-bold">0</span> / 10
                    </div>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4">
                    <div>
                        <label for="wu" class="block text-sm font-medium text-slate-600">Uniques (Wu)</label>
                        <input type="number" id="wu" placeholder="e.g., 3" step="0.1" class="weight-input mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-sm shadow-sm placeholder-slate-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500">
                    </div>
                    <div>
                        <label for="wsc" class="block text-sm font-medium text-slate-600">Session Count (Wsc)</label>
                        <input type="number" id="wsc" placeholder="e.g., 2" step="0.1" class="weight-input mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-sm shadow-sm placeholder-slate-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500">
                    </div>
                    <div>
                        <label for="wsd" class="block text-sm font-medium text-slate-600">Session Duration (Wsd)</label>
                        <input type="number" id="wsd" placeholder="e.g., 1" step="0.1" class="weight-input mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-sm shadow-sm placeholder-slate-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500">
                    </div>
                    <div>
                        <label for="wm" class="block text-sm font-medium text-slate-600">Minutes Watched (Wm)</label>
                        <input type="number" id="wm" placeholder="e.g., 4" step="0.1" class="weight-input mt-1 block w-full px-3 py-2 bg-white border border-slate-300 rounded-md text-sm shadow-sm placeholder-slate-400 focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500">
                    </div>
                </div>
                <div id="weight-error" class="text-red-500 text-sm mt-2 h-4"></div>
            </div>

            <!-- Result Section -->
            <div class="mt-8 pt-6 border-t-2 border-dashed">
                <div class="bg-slate-50 p-6 rounded-lg text-center">
                    <p class="text-lg font-medium text-slate-600">Performance Score (Ps)</p>
                    <p id="performanceScore" class="text-5xl font-bold text-blue-600 mt-2">0.00</p>
                </div>
            </div>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const inputs = document.querySelectorAll('#calculator-body input[type="number"]');
            const weightInputs = document.querySelectorAll('.weight-input');
            
            const totalWeightEl = document.getElementById('totalWeight');
            const weightTrackerEl = document.getElementById('weight-tracker');
            const weightErrorEl = document.getElementById('weight-error');
            const performanceScoreEl = document.getElementById('performanceScore');

            // Function to get a numeric value from an input field, defaulting to 0
            const getValue = (id) => parseFloat(document.getElementById(id).value) || 0;

            // Function to update weight total and styling
            const updateWeights = () => {
                let currentTotalWeight = 0;
                weightInputs.forEach(input => {
                    currentTotalWeight += parseFloat(input.value) || 0;
                });
                
                // Round to handle floating point inaccuracies
                currentTotalWeight = Math.round(currentTotalWeight * 10) / 10;

                totalWeightEl.textContent = currentTotalWeight;

                if (currentTotalWeight > 10) {
                    weightTrackerEl.classList.remove('text-slate-600', 'text-green-600');
                    weightTrackerEl.classList.add('text-red-600');
                    weightErrorEl.textContent = 'Total weight cannot exceed 10.';
                } else if (currentTotalWeight === 10) {
                    weightTrackerEl.classList.remove('text-slate-600', 'text-red-600');
                    weightTrackerEl.classList.add('text-green-600');
                    weightErrorEl.textContent = '';
                } else {
                    weightTrackerEl.classList.remove('text-red-600', 'text-green-600');
                    weightTrackerEl.classList.add('text-slate-600');
                    weightErrorEl.textContent = '';
                }
                
                return currentTotalWeight;
            };

            // Function to calculate the performance score
            const calculateScore = () => {
                const totalWeight = updateWeights();

                // Do not calculate if weights don't sum to 10
                if (totalWeight !== 10) {
                    performanceScoreEl.textContent = '---';
                    performanceScoreEl.classList.add('text-slate-400');
                    performanceScoreEl.classList.remove('text-blue-600');
                    if (totalWeight > 10) {
                       performanceScoreEl.textContent = 'Error';
                    }
                    return;
                }
                performanceScoreEl.classList.remove('text-slate-400');
                performanceScoreEl.classList.add('text-blue-600');

                // Get values
                const u = getValue('uniques');
                const sc = getValue('sessionCount');
                const sd = getValue('sessionDuration');
                const m = getValue('minutesWatched');

                const maxU = getValue('maxUniques');
                const maxSc = getValue('maxSessionCount');
                const maxSd = getValue('maxSessionDuration');
                const maxM = getValue('maxMinutesWatched');
                
                const wu = getValue('wu');
                const wsc = getValue('wsc');
                const wsd = getValue('wsd');
                const wm = getValue('wm');

                // Calculate normalized values (handle division by zero)
                const nu = maxU > 0 ? u / maxU : 0;
                const nsc = maxSc > 0 ? sc / maxSc : 0;
                const nsd = maxSd > 0 ? sd / maxSd : 0;
                const nm = maxM > 0 ? m / maxM : 0;

                // Calculate performance score
                const ps = (nu * wu) + (nsc * wsc) + (nsd * wsd) + (nm * wm);

                // Display result
                performanceScoreEl.textContent = ps.toFixed(2);
            };

            // Add event listeners to all inputs for real-time calculation
            inputs.forEach(input => {
                input.addEventListener('input', calculateScore);
            });
            
            // Initial calculation on page load
            calculateScore();
        });
    </script>
</body>
</html>
